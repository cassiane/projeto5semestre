<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="padraoInterno.xhtml">        
        <ui:define name="conteudo">
            <f:event listener="#{editarBean.carregarListaSolicitacaoEdicao()}" type="preRenderView" />
           
              
                   <f:view>

<center>
                 
                <h:form>
                  <p:growl id="msgs" showDetail="true" />
                    <p:panel id="basic" header="Biblioteca"  style="margin-bottom:20px">
                        <p:commandButton ajax="false" title="Novo Livro"  value="Novo" action="#{editarBean.editorNovoLivro()}"/>
                        <p:dataTable   value="#{editarBean.listarLivrosPerfil()}"  var="lis" rows="10" paginator="true">
                            <p:column headerText="ID" sortBy="#{lis.id}"   >
                            #{lis.id}
                         </p:column>
                            <p:column headerText="Titulo" sortBy="#{lis.titulo}">
                        #{lis.titulo}
                         </p:column>
                            <p:column>
                                <p:commandButton ajax="false" title="Consultar" value="Editar" action="#{editarBean.editarLivro(lis.id)}"/>                         
                        </p:column>
                        </p:dataTable>
    
                   </p:panel>
                     <p:commandButton value="Voltar" ajax="false" action="timeline"/>
                </h:form>
            </center>
                   </f:view>
            <f:view>
                <h:form>
                    <p:dataScroller id="datEdiLivro" value="#{editarBean.listaSolicitacaoEdicao}" var="ediLivro" chunkSize="3">
                        <h:outputText value='O usuario(a) "#{ediLivro.idPerfil.pseudonimo}" convidou vocÃª para editar o texto "#{ediLivro.idLivro.titulo}"' />
                        <br />
                        <p:commandButton ajax="false" value="Aceitar" action="#{editarBean.aceitarEdicao(ediLivro)}" update="datEdiLivro" />
                        <p:commandButton ajax="false" value="Negar" action="#{editarBean.negarEdicao(ediLivro)}" />
                    </p:dataScroller>
                </h:form>
            </f:view>
        </ui:define>
    </ui:composition>
</html>
